<div *ngIf="isDataAvailable; else load">

  <!-------------------INITIALDATA---------------->
  <div class="card w-25 author-book-card">
    <div class="card-header">
      <ul class="nav nav-pills card-header-pills">
        <li class="nav-item">
          <a class="nav-link book-link" (click)="alterView()" style="cursor: pointer;">
            <h6>Book</h6>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link author-link" (click)="alterView()" style="cursor: pointer;">
            <h6>Author</h6>
          </a>
        </li>
      </ul>
    </div>
    <div *ngIf="showBook; else show_author">
      <img class="card-img-top" src={{book.frontCover}} alt="Image of book">
      <div class="card-body">
        <h6 class="card-title">{{book.exact_title}}</h6>
        <p class="card-text" [innerHTML]="book.goodreadsDescription">
        </p>
        <footer class="blockquote-footer">
          <small class="text-muted">
            Goodreads Description
          </small>
        </footer>
      </div>
    </div>
    <ng-template #show_author>
      <img class="card-img-top" src={{book.authorImage}} alt="Image of author">
      <div class="card-body">
        <div class="card-title">
          <a href="book.authorLink" class="badge badge-light">
            {{book.author_name}}
            <!-- <h6>{{book.author_name}}</h6> -->
          </a>
        </div>
        <p class="card-text">{{book.wikipedia[0]}}</p>
      </div>
    </ng-template>
  </div>

  <div class="card descriptions w-25">
    <div class="card-body">
      <div class="card-text" [innerHTML]="book.amazonReview"></div>
      <footer class="blockquote-footer">
        <small class="text-muted">
          Amazon Review
        </small>
      </footer>
    </div>
  </div>

  <button type="button" class="btn btn-primary" id="amazon" data-toggle="modal" (click)="toggle()">
    <i class="fa fa-amazon fa-3x" aria-hidden="true"></i>
  </button>

  <!-- <div *ngIf="buttonToggle.amazonReviewVisible"> -->
  <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" id="modal">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <iframe [src]='sanitizer.bypassSecurityTrustResourceUrl(book.amazonCustomerReviews)' width="100%" height="100%" frameborder="0"></iframe>
      </div>
    </div>
  </div>

  <!--
  for amazon reviews
  <i class="fab fa-amazon"></i>
  for goodreads reviews
  <i class="fab fa-goodreads"></i>
  for wikipidia article
  <i class="fab fa-wikipedia-w"></i>
  for similar books (amazon, penguin & goodreads)
  <i class="fas fa-clone"></i> -->







  <!-- <div class="card">
      <div class="card-body">
        <blockquote class="blockquote mb-0">
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
          <footer class="blockquote-footer">Someone famous in <cite title="Source Title">Source Title</cite></footer>
        </blockquote>
      </div>
    </div> -->

  <!-- ----------------BUTTONS ------------------>

  <!-- <button (click)="toggle('wikiVisible')">Wikipidea Author Article</button>
  <button (click)="toggle('goodreadsVisible')">Goodreads Description</button>
  <button (click)="toggle('amazonDescriptionVisible')">Amazon Description</button>
  <button (click)="toggle('goodreadsReviewVisible')">Goodreads Reviews</button>
  <button (click)="toggle('amazonReviewVisible')">Amazon Reviews</button>
  <button (click)="toggle('amazonSimilarBooksVisible')">Amazon Similar Books</button>
  <button (click)="toggle('goodreadsSimilarBooksVisible')">Goodreads Similar Books</button>
  <button (click)="toggle('penguinDataVisible')">Penguin Info</button> -->



  <!-------------------------WIKIPEDIA---------------------->

  <div *ngIf="buttonToggle.wikiVisible">
    <div *ngFor="let wiki of book.wikipedia; let i=index">
      <b>{{wiki.slice(0, periods[i])}}</b>{{wiki.slice(periods[i], wiki.length)}}
      <br />
      <br />
    </div>
  </div>

  <!-- ---------------GOODREADS DESCRIPTION --------------- -->

  <div *ngIf="buttonToggle.goodreadsVisible">
    <div [innerHTML]="book.goodreadsDescription"></div>
  </div>

  <!-- -----------------AMAZON DESCRIPTION------------------ -->

  <div *ngIf="buttonToggle.amazonDescriptionVisible">
    <div [innerHTML]="book.amazonReview"></div>
  </div>

  <!----------------------Goodreads Reviews iframe ------------- -->

  <div *ngIf="buttonToggle.goodreadsReviewVisible">
    <iframe [src]='sanitizer.bypassSecurityTrustResourceUrl(book.goodreadsReviewsWidget)' width="100%" height="100%" frameborder="0"></iframe>
  </div>

  <!-- -----------------------AMAZON REVIEWS IFRAME------------------ -->

  <div *ngIf="buttonToggle.amazonReviewVisible">
    <iframe [src]='sanitizer.bypassSecurityTrustResourceUrl(book.amazonCustomerReviews)' width="100%" height="100%" frameborder="0"></iframe>
  </div>

  <!-- ------------AMAZON SIMILAR BOOKS LINKS TO GOODREADS---------- -->
  <div *ngIf="buttonToggle.amazonSimilarBooksVisible">
    <div *ngFor="let book of book.amazonSimilarProducts">
      <a href={{book.ASIN[0]}} alt="Link to similar book at goodreads" target="_blank">{{book.Title[0]}}</a>
      <br />
      <br />
    </div>
  </div>

  <!-- ---------------------GOODREADS SIMILAR BOOKS-------------- -->

  <div *ngIf="buttonToggle.goodreadsSimilarBooksVisible">
    <div *ngFor="let book of book.goodreadsSimilarBooks">
      <a href={{book.authors[0].author[0].link[0]}} target="_blank">{{book.authors[0].author[0].name[0]}}</a>
      <div *ngIf="book.image_url[0].indexOf('nophoto') === -1">
        <img src={{book.image_url[0]}} alt="image of goodreads similar book" />
      </div>
      <a href={{book.link[0]}} alt="Redirect to book (goodreads)" target="_blank">{{book.title[0]}}</a>
      <br />
      <br />
    </div>
  </div>

  <!-- -------------------------Penguin Data--------------------- -->

  <div *ngIf="buttonToggle.penguinDataVisible">
    <div *ngFor="let book of book.penguinData">
      <a href={{book.url}} alt="url to book" target="_blank">{{book.name}}</a>
      <p>{{book.author}}</p>
      <div [innerHTML]="book.description"></div>
      <br />
      <br />
    </div>
  </div>

</div>
<ng-template #load>
  <div class="jawn"></div>
</ng-template>
